Reading in the data to a data.frame object.
```{r}
data <- read.csv("OSMI Mental Health in Tech Survey 2017-18.csv", header=TRUE)
```

Replacing the dates in the 'how.many.employees...' with proper ranges.
```{r}
levels(data$How.many.employees.does.your.company.or.organization.have.) <- c(levels(data$How.many.employees.does.your.company.or.organization.have.), "1-5", "6-25")
data$How.many.employees.does.your.company.or.organization.have.[data$How.many.employees.does.your.company.or.organization.have.=="5-Jan"] <- "1-5"
data$How.many.employees.does.your.company.or.organization.have.[data$How.many.employees.does.your.company.or.organization.have.=="25-Jun"] <- "6-25"
```

For all of the columns asking if they have a certain mental health issue, replaces the value with a '1' if they do and a '0' if they don't.
```{r}
#64 -> 89
for(i in 64:89){
  levels(data[[i]]) <- c(levels(data[[i]]), 0, 1)
  for(j in 1:nrow(data)){
    data[[i]][j] <- if(is.na(data[[i]][j]) | data[[i]][j] == "") 0 else 1
  }
}
```

Combines the results of the third set of questions about mental health issues into the second
```{r}
#77 -> 89
for(i in 89:77){
  for(j in 1:nrow(data)){
    if(data[[i]][j] == 1){
      data[[i - 13]][j] <- data[[i]][j]
    }
  }
  data[[i]] <- NULL
}
```

Removes all the repeat columns asking if they have a certain mental health issue that are completely blank.
```{r}
#51 -> 63
for(i in 63:51){
  data[[i]] <- NULL 
}
```

```{r}
table(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)
```


Cleanup Diagnosis Check column

if there was a diagnosis on a specific disorder the "Have.you.ever.been.diagnosed.with.a.mental.health.disorder." column is marked as a "Yes"
```{r}
for(j in 1:nrow(data)){
  for(i in 63:51){
    if(data[[50]][j] == ""){
      if(data[[i]][j] == 1){
        data[[50]][j] <- "Yes"
      }
    }
  }
}
```
```{r}
table(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)
```
```{r}
table(data$Do.you.currently.have.a.mental.health.disorder.)
table(data$Have.you.had.a.mental.health.disorder.in.the.past.)
```
```{r}
levels(data$Have.you.had.a.mental.health.disorder.in.the.past.)
levels(data$Do.you.currently.have.a.mental.health.disorder.)
levels(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)
```

```{r}
data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder. <- as.character(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)
```

```{r}
for(j in 1:nrow(data)){
  if(data[[50]][j] == ("") || is.na(data[[50]][j]) == TRUE){
    if(data[[49]][j] == "No" && data[[64]][j] == "No"){
      data[[50]][j] <- "No"
    }else if(data[[49]][j] == ("Don't Know")){
      if(data[[64]][j] == ("Don't Know")){
        data[[50]][j] <- "Maybe"
      }else if(data[[64]][j] == ("Possibly")){
        data[[50]][j] <- "Maybe"
      }else if(data[[64]][j] == "Yes"){
        data[[50]][j] <- "Maybe"
      }
    }else if(data[[49]][j] == "Possibly"){
      if(data[[64]][j] == "Don't Know"){
        data[[50]][j] <- "Maybe"
      }else if(data[[64]][j] == "Possibly"){
        data[[50]][j] <- "Maybe"
      }else if(data[[64]][j] == "Yes"){
        data[[50]][j] <- "Maybe"
      }
    }else if(data[[49]][j] == "No"){
      if(data[[64]][j] == "Don't Know"){
        data[[50]][j] <- "No"
      }else if(data[[64]][j] == "Possibly"){
        data[[50]][j] <- "No"
      }
    }
  }
}

data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder. <- as.factor(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)
```

```{r}
table(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)
test <- c(table(data$Have.you.ever.been.diagnosed.with.a.mental.health.disorder.)[2:4])
sum(test)
data
```


Data Cleanup: Gender

Resources:
https://www.genderspectrum.org/quick-links/understanding-gender/
https://en.wikipedia.org/wiki/Non-binary_gender

```{r}
table(data$What.is.your.gender.)
```
```{r}
cis_female <- c( 'Female', 'female', 'Female ', 'Woman', 'woman', 'F', 'f', 'I identify as female', '*shrug emoji* (F)', 'Cis woman', 'Female (cisgender)', 'Cis-Female', 'Cisgendered woman', 'She/her/they/them', 'Cis female', 'cisgender female', 'femalw', 'femail', 'female (cis)', 'My sex is female.', 'female (cisgender)', 'Female (cis) ', 'Woman-identified', 'cis-Female', 'cis female', 'F, cisgender', 'Cis female ')
cis_male <- c('male', 'Male', 'Ostensibly Male', 'male, born with xy chromosoms', 'Malel', 'M', 'MALE', 'm', 'Cis-male', 'Male ', 'cis male ', 'Cis Male', 'Man', 'Cisgender male', 'cis-male', 'Mail', 'cis hetero male', 'Male (cis)', "male (hey this is the tech industry you're talking about)", 'God King of the Valajar', 'Cis male', 'man', 'Male, cis', 'cis male', 'dude' , 'SWM')
transgender <- c('transgender', 'Trans woman', 'Trans female', 'trans woman', 'Transfeminine', 'Trans man')
gq <- c('male/androgynous ', 'Agender', '', 'Nonbinary', 'Male (or female, or both)', 'non binary', 'Female/gender non-binary.', 'N/A', 'genderfluid', 'Genderqueer', 'Demiguy', 'none', 'non-binary', 'Other', 'NB', 'Genderfluid', 'Nonbinary/femme', 'gender non-conforming woman', 'uhhhhhhhhh fem genderqueer?', 'n/a', 'Non-binary', 'Agender/genderfluid', 'Male-ish', 'sometimes', 'Contextual', 'Non binary', 'Genderqueer demigirl', 'Genderqueer/non-binary', 'nonbinary', 'Female-ish', '\\-', 'None')
```

```{r}
gender <- as.vector(data$What.is.your.gender.)
n <- length(gender)
for(i in 1:n){
  if(gender[i] %in% cis_female){
    gender[i] <- "cis-female"
  }else if (gender[i] %in% gq){
    gender[i] <- "genderqueer"
  }else if (gender[i] %in% transgender){
    gender[i] <- "transgender"
  }else if (gender[i] %in% cis_male){
    gender[i] <- "cis-male"
  }else{
    gender[i]
  }
}
```

```{r}
table(gender)
```

```{r}
data$What.is.your.gender. <- gender
```

```{r}
data$What.is.your.gender. <- as.factor(data$What.is.your.gender.)
```


```{r}
table(data$What.is.your.gender.)
```
```{r}
data
```
```{r}
str(data$What.is.your.gender.)
```

